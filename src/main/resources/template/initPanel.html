<!doctype html><html lang="en"><head>    <meta charset="utf-8">    <meta name="viewport" content="width=device-width, initial-scale=1">    <meta name="color-scheme" content="light dark"/>    <link href="../css/pico.min.css" rel="stylesheet" type="text/css">    <link href="http://inner/css/pico.min.css" rel="stylesheet" type="text/css">    <script src="http://inner/js/theme.js"></script>    <title>init panel</title></head><body><main class="container">    <h2>首次安装请先点击下方按钮进行数据源加载，这可能需要一点时间</h2>    <h4>小提示：</h4>    <ul>        <li>这是一句凑字数的废话。</li>    </ul>    <!-- Progress -->    <section id="progress" hidden="hidden">        <h2>执行进度：</h2>        <progress id="progress-1" value="1" max="100"></progress>    </section>    <!-- ./ Progress -->    <button aria-busy="false" id="initButton">点我</button></main><script>    document.getElementById('initButton').addEventListener('click', function () {        let initButton = document.getElementById("initButton");        initButton.disabled = true;        initButton.setAttribute("aria-busy", "true");        initButton.innerText = "正在初始化，请稍后...";        let process = document.getElementById("progress");        process.removeAttribute("hidden");        let progressElement = document.getElementById("progress-1");        let currentValue = 1;        let maxValue = 100;        let speed = 50; // 初始速度        let ins = 1;        function updateProgress() {            if (progressElement.value === maxValue) {                return;            }            if (currentValue < maxValue - 1) {                if (currentValue >= 90) {                    speed = 200 + speed * ins++; // 进度达到90时减慢速度                }                currentValue++;                progressElement.value = currentValue;                setTimeout(updateProgress, speed);            }        }        updateProgress();        window.processInit({            request: 'processInit', onSuccess: function (response) {                let button = document.getElementById("initButton");                button.setAttribute("aria-busy", "false");                button.innerText = "初始化成功";                let progress = document.getElementById("progress-1");                progress.value = maxValue;                setTimeout(function () {                    let projectId = document.getElementById("projectId");                    window.refreshToolMainPanel({request: '' + projectId?.innerText, onSuccess: function (response) {}, onFailure: function (error_code, error_message) {}});                }, 3000);            }, onFailure: function (error_code, error_message) {                let process = document.getElementById("progress");                process.setAttribute("hidden", "hidden")                let button = document.getElementById("initButton");                button.setAttribute("aria-busy", "false");                button.disabled = false;                button.innerText = "重试";            }        });    });</script></body></html>